<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>과제 3</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/addons/p5.gif.min.js"></script>
</head>
<body>
<script>
let mouthCornerOffset = 0;
let shirtColors;
let currentColorIndex = 0;
let lastColorChangeTime = 0;
const colorChangeInterval = 2000;

function setup() {
  createCanvas(600, 400);
  shirtColors = [
    color(126, 87, 194),
    color(0, 0, 255),
    color(255, 0, 0),
    color(255, 255, 0),
    color(255, 165, 0)
  ];
}

function draw() {
  background(240);

  if (millis() - lastColorChangeTime > colorChangeInterval) {
    currentColorIndex = (currentColorIndex + 1) % shirtColors.length;
    lastColorChangeTime = millis();
  }

  translate(width / 2, height / 2);

  noStroke();
  fill(255, 224, 189);
  rectMode(CENTER);
  rect(0, 95, 70, 60);

  fill(shirtColors[currentColorIndex]);
  beginShape();
  vertex(-175, 350);
  vertex(-175, 130);
  quadraticVertex(-100, 100, -50, 100);
  quadraticVertex(0, 110, 50, 100);
  quadraticVertex(100, 100, 175, 130);
  vertex(175, 350);
  endShape(CLOSE);

  fill(255, 224, 189);
  stroke(40);
  ellipse(-130, 20, 25, 45);
  ellipse(130, 20, 25, 45);

  beginShape();
  vertex(0, 150);
  quadraticVertex(-120, 120, -130, 20);
  quadraticVertex(-135, -120, 0, -145);
  quadraticVertex(135, -120, 130, 20);
  quadraticVertex(120, 120, 0, 150);
  endShape(CLOSE);

  noStroke();
  fill(30, 30, 30);
  beginShape();
  vertex(-138, -45);
  quadraticVertex(-145, -175, 0, -170);
  quadraticVertex(145, -175, 138, -45);
  quadraticVertex(70, -60, 0, -55);
  quadraticVertex(-70, -60, -138, -45);
  endShape(CLOSE);

  stroke(50);
  strokeWeight(4);
  line(-70, -35, -40, -40);
  line(40, -40, 70, -35);

  fill(255);
  stroke(40);
  ellipse(-55, -5, 50, 30);
  ellipse(55, -5, 50, 30);

  let pupilOffset = map(mouseX, 0, width, -8, 8);
  noStroke();
  fill(30, 30, 30);
  ellipse(-55 + pupilOffset, -5, 18, 18);
  ellipse(55 + pupilOffset, -5, 18, 18);

  noFill();
  stroke(50);
  arc(0, 30, 20, 20, 0.2, PI - 0.2);

  stroke(50);
  beginShape();
  vertex(-30, 70 + mouthCornerOffset);
  quadraticVertex(0, 90, 30, 70 + mouthCornerOffset);
  endShape();
}

function keyPressed() {
  if (key === 's' || key === 'S') {
    saveGif('myAnimation.gif', 10);
  }
  if (keyCode === UP_ARROW) mouthCornerOffset -= 5;
  if (keyCode === DOWN_ARROW) mouthCornerOffset += 5;
}
</script>
</body>
</html>
